# Отслеживание изменения параметров карточки товара на маркетплейсе Wildberries

API для сайта. 


## Запуск

### Инструкция по запуску 

[Установите Python](https://www.python.org/), если этого ещё не сделали.

Проверьте, что `python` установлен и корректно настроен. Запустите его в командной строке:
```sh
python --version
```

Возможно, вместо команды `python` здесь и в остальных инструкциях этого README придётся использовать `python3`. Зависит это от операционной системы и от того, установлен ли у вас Python старой второй версии.

В каталоге проекта создайте виртуальное окружение:
```sh
python -m venv venv
```
Активируйте его. На разных операционных системах это делается разными командами:
- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`

Перейдите в каталог проекта:

```sh
cd wildberries_cards_collection
```

## Как запустить сайт

Запустите базу данных и сайт:

```shell-session
$ docker-compose up
```

В новом терминале не выключая сайт создайте суперпользователя для доступа к админке:

```shell-session
$ docker-compose run web ./manage.py createsuperuser
```



### Переменные окружения

Часть настроек проекта берётся из переменных окружения. 
Чтобы их определить, создайте файл `.env` рядом с `manage.py` 
и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Используются следующие переменные окружения: 
- `DEBUG` — дебаг-режим. Поставьте True, чтобы увидеть отладочную информацию в случае ошибки.
- `SECRET_KEY` — секретный ключ проекта
- `ALLOWED_HOSTS` - адреса, на которых будет обслуживаться сайт
- `DATABASE_URL` - URL, в котором содержатся данные о БД, которые распарсятся с [помощью](https://github.com/sloria/environs#usage-with-django)
- `CELERY_BROKER` - брокер сообщений, используемый издателями для доставки сообщений потребителям. Используется для работы с [celery](https://docs.celeryq.dev/en/stable/getting-started/introduction.html)
- `CELERY_RESULT_BACKEND` -  backend, используемый для хранения результатов выполнения задачю Используется для работы с [celery](https://docs.celeryq.dev/en/stable/getting-started/introduction.html)


## Документация по сайту

Добавлены страницы:
регистрации - `accounts/register/`,
авторизации - `accounts/login/`,
создания трекера - `accounts/track_parameters/`


## Документация по API

### Регистрация/аутентификация пользователя с использованием JWT
- Права доступа: `Любой пользователь`
- URL: `api/auth/users/`

Данные введенные при добавлении участника используются для регистрации, либо авторизации.

### Создание трекера отслеживания карточки 
- Права доступа: `Авторизованный пользователь`
- URL: `api/user/track_create/`

Создается объект, в котором указан артикул отслеживаемого товара, время начала 
и конца отслеживания, а также интервал отслеживания


### Список трекеров пользователя
- Права доступа: `Авторизованный пользователь`
- URL: `api/user/tracks/`

Выводятся все трекеры пользователя. Добавлен фильтр по интервалу отслеживания


### Инофрмация по одному трекеру
- Права доступа: `Авторизованный пользователь`
- URL: `api/user/track/<int:pk>/`

Информация по одному конкретному трекеру.


### Список карточек по конкретному трекеру
- Права доступа: `Авторизованный пользователь`
- URL: `api/user/track/<int:pk>/products/`

Показывается список отслеживаемых параметров карточки по одному выбранному трекеру.
Добавлен фильтр по времени начала и конца отслеживания.


### Список карточек пользователя по всем трекерам
- Права доступа: `Авторизованный пользователь`
- URL: `api/user/products/`

Показывает список отслеживаемых параметров карточки по всем трекерам пользователя.
Добавлен фильтр по артикулам. Артикулы необходимо указывать через запятую.


### Список продуктов пользователя по артиклу
- Права доступа: `Авторизованный пользователь`
- URL: `api/user/product/<int:article>/`

Вывод карточек, с указанным артикулом, по всем трекерам данного пользователя


## Технологии
django, djangorestframework, docker, docker-compose, celery